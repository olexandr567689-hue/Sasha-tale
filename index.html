<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>—Å–∞—à–∏–Ω—ñ-–∫–∞–∑–∫–∏: FINAL EDITION</title>
    <style>
        :root { --ut-red: #ff0000; --ut-yellow: #ffff00; --ut-green: #00ff00; --ut-blue: #4deeea; --roblox-yellow: #f5cd30; --roblox-blue: #00a2ff; --roblox-green: #287f46; }
        body { background: #000; color: #fff; margin: 0; font-family: 'Courier New', monospace; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; touch-action: none; -webkit-tap-highlight-color: transparent; }
        
        /* –§–Ü–ù–ê–õ–¨–ù–ò–ô –°–¢–ò–õ–¨ –ñ–£–†–ù–ê–õ–£ */
        #changelog-overlay { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #080808; border: 3px solid #fff; width: 90%; max-height: 80%; overflow-y: auto; z-index: 4000; display: none; box-shadow: 0 0 50px rgba(255, 255, 255, 0.1); border-radius: 8px; }
        .log-title { background: #fff; color: #000; padding: 12px; font-weight: bold; text-align: center; font-size: 20px; letter-spacing: 3px; }
        .log-body { padding: 20px; }
        .ver-block { margin-bottom: 25px; border-left: 4px solid var(--ut-blue); padding-left: 15px; position: relative; }
        .ver-tag { background: var(--ut-blue); color: #000; padding: 2px 8px; font-weight: bold; font-size: 12px; border-radius: 3px; }
        .ver-num { color: var(--ut-yellow); font-size: 18px; font-weight: bold; margin-left: 10px; }
        .ver-date { color: #555; font-size: 12px; display: block; margin-top: 5px; }
        .change-list { list-style: none; padding: 0; margin: 12px 0; }
        .change-list li { margin: 8px 0; font-size: 14px; color: #ccc; display: flex; align-items: flex-start; }
        .change-list li::before { content: "¬ª"; color: var(--ut-blue); margin-right: 10px; font-weight: bold; }
        .fix-highlight { color: var(--ut-green) !important; }

        #intro-layer { position: fixed; inset: 0; background: #000; z-index: 3000; display: flex; align-items: center; justify-content: center; flex-direction: column; }
        .overlay { position: fixed; inset: 0; background: #000; z-index: 2000; display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .btn-ui { border: 2px solid #fff; padding: 15px 20px; cursor: pointer; margin: 10px; font-weight: bold; background: #000; color: #fff; width: 280px; font-size: 16px; transition: 0.2s; }
        .btn-ui:hover { background: #fff; color: #000; }

        #game-container { display: none; flex-direction: column; align-items: center; width: 100%; height: 100%; }
        #boss-area { height: 180px; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; }
        .boss-glitch { animation: glitch 0.2s infinite; }
        @keyframes glitch { 0% { transform: translate(0); } 50% { transform: translate(-2px, 1px); } 100% { transform: translate(0); } }

        .roblox-char { position: relative; width: 60px; height: 80px; }
        .r-head { width: 25px; height: 25px; background: var(--roblox-yellow); margin: 0 auto; border-radius: 4px; border: 2px solid #000; }
        .r-body { width: 45px; height: 40px; background: var(--roblox-blue); margin: 2px auto; border-radius: 2px; display: flex; align-items: center; justify-content: center; font-size: 10px; color: white; font-weight: bold; }
        .r-legs { display: flex; justify-content: center; gap: 3px; }
        .r-leg { width: 20px; height: 22px; background: var(--roblox-green); border-radius: 2px; }

        #boss-hp-bg { width: 200px; height: 14px; background: #333; border: 2px solid #fff; margin-top: 10px; }
        #boss-hp-fg { height: 100%; background: var(--ut-green); width: 100%; transition: width 0.3s; }
        #battle-screen { position: relative; border: 4px solid #fff; width: 300px; height: 140px; background: #000; overflow: hidden; margin-top: 10px; }
        #heart { position: absolute; width: 16px; height: 16px; background: var(--ut-red); z-index: 100; border-radius: 2px; display: none; }
        #dialog { padding: 12px; font-size: 14px; line-height: 1.4; height: 45px; box-sizing: border-box; }
        #menu { display: flex; gap: 4px; width: 310px; margin-top: 10px; }
        .btn-m { flex: 1; border: 2px solid orange; color: orange; padding: 12px 0; font-size: 10px; text-align: center; font-weight: bold; }
        .btn-m.active { background: #332200; color: var(--ut-yellow); border-color: var(--ut-yellow); }
        .can-spare { color: var(--ut-yellow) !important; border-color: var(--ut-yellow) !important; }

        #controls { margin-top: auto; padding-bottom: 20px; display: flex; width: 100%; justify-content: space-around; align-items: center; }
        .d-pad { display: grid; grid-template-columns: repeat(3, 65px); gap: 10px; }
        .d-btn { background: #222; border: 2px solid #fff; height: 65px; display: flex; align-items: center; justify-content: center; font-size: 24px; border-radius: 10px; color: white; user-select: none; }
        #btn-z { width: 80px; height: 80px; background: #222; border: 4px solid var(--ut-yellow); color: var(--ut-yellow); border-radius: 50%; font-size: 32px; font-weight: bold; display: flex; align-items: center; justify-content: center; }

        .wall, .cursor, .tear { position: absolute; z-index: 50; }
        .wall { background: var(--roblox-blue); border: 1px solid #fff; }
        .cursor { width: 20px; height: 20px; background: #fff; clip-path: polygon(0 0, 100% 70%, 50% 70%, 80% 100%, 60% 100%, 30% 70%, 0 70%); }
        .tear { background: #fff; width: 10px; height: 10px; border-radius: 50%; }

        #mana-container { width: 100%; height: 8px; border: 1px solid var(--ut-blue); margin-top: 5px; background: #111; }
        #mana-bar { height: 100%; background: var(--ut-blue); width: 0%; }
        #attack-bar { position:absolute; inset:0; border:2px solid #fff; display:none; background:#000; z-index: 500; }
        #slider { position:absolute; left:0; top:0; width:12px; height:100%; background:#fff; }
        .shake { animation: shake 0.2s; }
        @keyframes shake { 0% { transform: translate(3px, 3px); } 25% { transform: translate(-3px, -3px); } 50% { transform: translate(3px, -3px); } 100% { transform: translate(0, 0); } }
    </style>
</head>
<body>

    <div id="changelog-overlay">
        <div class="log-title">DATABASE LOGS</div>
        <div class="log-body">
            
            <div class="ver-block">
                <span class="ver-tag">LATEST</span>
                <span class="ver-num">v1.2.4</span>
                <span class="ver-date">02 –°—ñ—á–Ω—è 2026</span>
                <ul class="change-list">
                    <li class="fix-highlight">–ü–æ–≤–Ω–∏–π —Ä–µ–¥–∏–∑–∞–π–Ω –ñ—É—Ä–Ω–∞–ª—É –û–Ω–æ–≤–ª–µ–Ω—å: —Ç–µ–ø–µ—Ä —É —Å—Ç–∏–ª—ñ —Ç–µ—Ä–º—ñ–Ω–∞–ª—É –≤–∏—Å–æ–∫–æ—ó —á—ñ—Ç–∫–æ—Å—Ç—ñ.</li>
                    <li class="fix-highlight">–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∫–æ–¥—É: –≤–∏–¥–∞–ª–µ–Ω–æ –≤—Å—ñ –ø—Ä–µ—Ñ—ñ–∫—Å-–±–∞–≥–∏ —Ç–∞ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ —Ü–∏–∫–ª–∏.</li>
                    <li>–ü–æ–∫—Ä–∞—â–µ–Ω–æ –≤—ñ–∑—É–∞–ª—å–Ω—É —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å –≥—Ä–∏ "—Å–∞—à–∏–Ω—ñ-–∫–∞–∑–∫–∏".</li>
                </ul>
            </div>

            <div class="ver-block" style="border-color: #444;">
                <span class="ver-tag" style="background:#444; color:#fff;">STABLE</span>
                <span class="ver-num">v1.2.3</span>
                <ul class="change-list">
                    <li>–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–∏–π –±–∞–≥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±–æ—Å–∞ –ê–Ω–¥—Ä1015.</li>
                    <li>–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ —Å–∏—Å—Ç–µ–º—É –∂–æ–≤—Ç–æ—ó –ø–æ—â–∞–¥–∏ (MERCY).</li>
                    <li>–î–æ–¥–∞–Ω–æ —Å–∏—Å—Ç–µ–º—É –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –º–∞–Ω–∏ (Refactor).</li>
                </ul>
            </div>

            <div class="ver-block" style="border-color: #222;">
                <span class="ver-tag" style="background:#222; color:#fff;">CORE</span>
                <span class="ver-num">v1.0.0</span>
                <ul class="change-list">
                    <li>–†–µ–ª—ñ–∑ –¥–≤–∏–≥—É–Ω–∞ –≥—Ä–∏ —Ç–∞ –ø–µ—Ä—à–æ–≥–æ —Ä—ñ–≤–Ω—è –∑ –ù–∞–ø—Å—Ç–∞–±–ª—É–∫–æ–º.</li>
                </ul>
            </div>

        </div>
        <button class="btn-ui" style="width: 100%; margin: 0; border:none; border-radius: 0 0 5px 5px; background: #fff; color: #000;" onclick="toggleChangelog(false)">–ü–û–í–ï–†–ù–£–¢–ò–°–¨ –î–û –ì–†–ò</button>
    </div>

    <div id="intro-layer">
        <h1 style="color: var(--ut-yellow); text-shadow: 2px 2px #333;">–°–ê–®–ò–ù–Ü-–ö–ê–ó–ö–ò</h1>
        <button class="btn-ui" onclick="initGame()">–ü–û–ß–ê–¢–ò –ü–†–ò–ì–û–î–£</button>
        <button class="btn-ui" style="font-size: 12px; color: var(--ut-blue); border-color: var(--ut-blue);" onclick="toggleChangelog(true)">–ñ–£–†–ù–ê–õ –°–ò–°–¢–ï–ú–ò</button>
    </div>

    <div id="screen-name" class="overlay">
        <h2>–í–í–ï–î–Ü–¢–¨ –Ü–ú'–Ø</h2>
        <input type="text" id="input-name" value="SASHA" maxlength="8" style="background:#000; color:#fff; border:2px solid #fff; padding:15px; font-size:20px; text-align:center; outline:none; width: 200px;">
        <button class="btn-ui" onclick="goToChoice()">–î–ê–õ–Ü</button>
    </div>

    <div id="screen-choice" class="overlay">
        <h2>–û–ë–ï–†–Ü–¢–¨ –°–£–ü–ï–†–ù–ò–ö–ê</h2>
        <button class="btn-ui" onclick="startGame(1)">üëª –ù–ê–ü–°–¢–ê–ë–õ–£–ö</button>
        <button class="btn-ui" style="color:var(--ut-red); border-color:var(--ut-red);" onclick="startGame(2)">üß± –ê–ù–î–†1015 (–ë–û–°)</button>
    </div>

    <div id="game-container">
        <div id="boss-area">
            <div id="enemy-sprite" style="font-size: 80px;"></div>
            <div id="roblox-sprite" class="roblox-char" style="display:none;">
                <div class="r-head"></div>
                <div class="r-body">CODE</div>
                <div class="r-legs"><div class="r-leg"></div><div class="r-leg"></div></div>
            </div>
            <div id="boss-hp-bg"><div id="boss-hp-fg"></div></div>
        </div>

        <div id="battle-screen">
            <div id="heart"></div>
            <div id="dialog"></div>
            <div id="attack-bar"><div id="slider"></div></div>
        </div>

        <div id="stats" style="width:300px; margin-top:10px; font-size: 14px;">
            <b id="disp-name">SASHA</b> LV 1 <span style="margin-left:20px;">HP <span id="hp-text">20/20</span></span>
            <div id="mana-container"><div id="mana-bar"></div></div>
        </div>

        <div id="menu">
            <div id="m0" class="btn-m active" onclick="setMenu(0)">FIGHT</div>
            <div id="m1" class="btn-m" onclick="setMenu(1)">ACT</div>
            <div id="m2" class="btn-m" onclick="setMenu(2)">ITEM</div>
            <div id="m3" class="btn-m" onclick="setMenu(3)">MERCY</div>
        </div>

        <div id="controls">
            <div class="d-pad">
                <div class="d-btn" style="grid-column:2" ontouchstart="keys.up=true" ontouchend="keys.up=false">‚ñ≤</div>
                <div class="d-btn" style="grid-column:1" ontouchstart="keys.left=true" ontouchend="keys.left=false">‚óÄ</div>
                <div class="d-btn" style="grid-column:3" ontouchstart="keys.right=true" ontouchend="keys.right=false">‚ñ∂</div>
                <div class="d-btn" style="grid-column:2" ontouchstart="keys.down=true" ontouchend="keys.down=false">‚ñº</div>
            </div>
            <div id="btn-z" onclick="pressZ()">Z</div>
        </div>
    </div>

    <script>
        let pName="SASHA", bossId=1, hp=20, eHp=1000, maxE=1000, mana=0, actCount=0;
        let mode='INTRO', menuIdx=0, sPos=0, sDir=1, px=142, py=62, audioCtx, musicTimer;
        const keys={up:false, down:false, left:false, right:false};

        function playMusic() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const notes = [293.66, 293.66, 587.33, 440.00, 415.30, 392.00, 349.23, 293.66, 349.23, 392.00];
            let step = 0;
            musicTimer = setInterval(() => {
                if(hp <= 0) return;
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.type = 'square'; osc.frequency.value = notes[step % notes.length];
                gain.gain.setValueAtTime(0.02, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.1);
                osc.connect(gain); gain.connect(audioCtx.destination);
                osc.start(); osc.stop(audioCtx.currentTime + 0.12);
                step++;
            }, 130);
        }

        function toggleChangelog(show) { document.getElementById('changelog-overlay').style.display = show ? 'block' : 'none'; }
        function initGame() { playMusic(); document.getElementById('intro-layer').style.display='none'; document.getElementById('screen-name').style.display='flex'; }
        function goToChoice() { pName = document.getElementById('input-name').value.trim().toUpperCase() || "SASHA"; document.getElementById('screen-name').style.display='none'; document.getElementById('screen-choice').style.display='flex'; }

        function startGame(id) {
            bossId=id; eHp = (id === 1 ? 1000 : 3500); maxE = eHp; actCount=0;
            document.getElementById('enemy-sprite').innerText = (id === 1 ? 'üëª' : '');
            document.getElementById('roblox-sprite').style.display = (id === 2 ? 'block' : 'none');
            if(id === 2) document.getElementById('roblox-sprite').classList.add('boss-glitch');
            document.getElementById('screen-choice').style.display='none';
            document.getElementById('game-container').style.display='flex';
            document.getElementById('disp-name').innerText=pName;
            mode='MENU'; updateUI(); requestAnimationFrame(loop);
            msg(id === 1 ? "* –í–∏ –≤—ñ–¥—á—É–≤–∞—î—Ç–µ, —â–æ —Ö—Ç–æ—Å—å —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—î." : "* –ê–Ω–¥—Ä1015: System.Status = 'Aggressive';");
        }

        function setMenu(i) { if(mode==='MENU') { menuIdx=i; [0,1,2,3].forEach(n=>document.getElementById('m'+n).classList.toggle('active', n===i)); } }
        function isSpareable() { return (bossId === 1 && actCount >= 3) || (bossId === 2 && actCount >= 5); }

        function pressZ() {
            if(mode==='MENU') {
                if(menuIdx===0) { mode='ATTACK'; document.getElementById('attack-bar').style.display='block'; sPos=0; }
                if(menuIdx===1) { actCount++; msg(bossId===1?"* –í–∏ —Ä–æ–±–∏—Ç–µ –∫–æ–º–ø–ª—ñ–º–µ–Ω—Ç –ø—Ä–∏–≤–∏–¥—É.":"* –í–∏ –∑–Ω–∞—Ö–æ–¥–∏—Ç–µ –±–∞–≥ —É –±—Ä–æ–Ω—ñ –≤–æ—Ä–æ–≥–∞."); next(); }
                if(menuIdx===2) { if(mana>=25){ hp=Math.min(20, hp+12); mana-=25; msg("* –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ 'Backup'! +12 –•–ü."); } else msg("* –ù–µ–º–∞—î –µ–Ω–µ—Ä–≥—ñ—ó."); updateUI(); next(); }
                if(menuIdx===3) { if(isSpareable()) { alert('–ú–ò–†–ù–ê –ü–ï–†–ï–ú–û–ì–ê!'); location.reload(); } else { msg("* –©–µ –Ω–µ —á–∞—Å —â–∞–¥–∏—Ç–∏."); next(); } }
            } else if(mode==='ATTACK') {
                let d = Math.abs(sPos-150)<25?600:150; eHp-=d;
                document.getElementById('attack-bar').style.display='none';
                msg("* –ù–ê–ù–ï–°–ï–ù–û –£–†–û–ù: "+d+"!"); setTimeout(()=>eHp<=0?location.reload():enemyTurn(), 800);
            }
        }

        function msg(t) { document.getElementById('dialog').innerText=t; }
        function next() { mode='BUSY'; setTimeout(enemyTurn, 800); }

        function enemyTurn() {
            mode='DODGE'; px=142; py=62; document.getElementById('heart').style.display='block';
            let t=0; const limit = bossId===2 ? 80 : 50;
            const turnInterval = setInterval(() => {
                if(hp <= 0) { clearInterval(turnInterval); return; }
                t++; 
                if(bossId===1) spawnTear(); 
                else { if(t%12===0) spawnWall(); if(t%18===0) spawnCursor(); }
                if(t>limit) { 
                    clearInterval(turnInterval); document.getElementById('heart').style.display='none'; 
                    mode='MENU'; updateUI();
                    document.getElementById('m3').classList.toggle('can-spare', isSpareable());
                    msg("* –í–∞—à —Ö—ñ–¥."); 
                }
            }, 100);
        }

        function spawnWall() {
            const w=document.createElement('div'); w.className='wall';
            w.style.width='100px'; w.style.height='15px'; w.style.top=Math.random()*110+'px'; w.style.left='-100px';
            document.getElementById('battle-screen').appendChild(w);
            let x=-100; const m=setInterval(()=>{ 
                x+=8; w.style.left=x+'px'; 
                if(checkCol(w)){ hp-=3; w.remove(); clearInterval(m); updateUI(); shake(); }
                if(x>320 || mode!=='DODGE'){ w.remove(); clearInterval(m); }
            },25);
        }

        function spawnCursor() {
            const c=document.createElement('div'); c.className='cursor';
            c.style.left=px+'px'; c.style.top='-30px';
            document.getElementById('battle-screen').appendChild(c);
            let y=-30; const m=setInterval(()=>{ 
                y+=10; c.style.top=y+'px'; 
                if(checkCol(c)){ hp-=4; c.remove(); clearInterval(m); updateUI(); shake(); }
                if(y>150 || mode!=='DODGE'){ c.remove(); clearInterval(m); }
            },20);
        }

        function spawnTear() {
            const p=document.createElement('div'); p.className='tear';
            p.style.left=Math.random()*280+'px'; p.style.top='-10px';
            document.getElementById('battle-screen').appendChild(p);
            let y=-10; const m=setInterval(()=>{ 
                y+=6; p.style.top=y+'px'; 
                if(checkCol(p)){ hp-=2; p.remove(); clearInterval(m); updateUI(); shake(); }
                if(y>150 || mode!=='DODGE'){ p.remove(); clearInterval(m); }
            },30);
        }

        function checkCol(el) {
            if(mode!=='DODGE') return false;
            const hr=document.getElementById('heart').getBoundingClientRect(), er=el.getBoundingClientRect();
            return !(er.left>hr.right||er.right<hr.left||er.top>hr.bottom||er.bottom<hr.top);
        }

        function shake() { document.getElementById('battle-screen').classList.add('shake'); setTimeout(()=>document.getElementById('battle-screen').classList.remove('shake'), 200); }
        function updateUI() { 
            document.getElementById('hp-text').innerText=Math.max(0,hp)+"/20"; 
            document.getElementById('boss-hp-fg').style.width=(Math.max(0,eHp)/maxE*100)+"%"; 
            document.getElementById('mana-bar').style.width=Math.min(100, mana)+"%";
            if(hp<=0 && mode!=='DEAD') { mode='DEAD'; alert('–ì—Ä–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–∞. –°–ø—Ä–æ–±—É–π —â–µ!'); location.reload(); }
        }

        function loop() {
            if(mode==='DODGE') {
                const spd = 5.5;
                if(keys.up && py > 2) py -= spd; if(keys.down && py < 122) py += spd;
                if(keys.left && px > 2) px -= spd; if(keys.right && px < 282) px += spd;
                const h = document.getElementById('heart');
                h.style.left=px+'px'; h.style.top=py+'px';
                if(mana<100) mana+=0.35; updateUI();
            }
            if(mode==='ATTACK') { sPos+=(13*sDir); if(sPos>288||sPos<0) sDir*=-1; document.getElementById('slider').style.left=sPos+'px'; }
            requestAnimationFrame(loop);
        }

        window.addEventListener('keydown', e => { if(e.key.includes('Arrow')) keys[e.key.replace('Arrow','').toLowerCase()] = true; if(e.key.toLowerCase() === 'z') pressZ(); });
        window.addEventListener('keyup', e => { if(e.key.includes('Arrow')) keys[e.key.replace('Arrow','').toLowerCase()] = false; });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>—Å–∞—à–∏–Ω—ñ-–∫–∞–∑–∫–∏: FINAL EDITION</title>
    <style>
        :root { --ut-red: #ff0000; --ut-yellow: #ffff00; --ut-green: #00ff00; --ut-blue: #4deeea; --roblox-yellow: #f5cd30; --roblox-blue: #00a2ff; --roblox-green: #287f46; }
        body { background: #000; color: #fff; margin: 0; font-family: 'Courier New', monospace; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; touch-action: none; -webkit-tap-highlight-color: transparent; }
        
        /* –§–Ü–ù–ê–õ–¨–ù–ò–ô –°–¢–ò–õ–¨ –ñ–£–†–ù–ê–õ–£ */
        #changelog-overlay { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #080808; border: 3px solid #fff; width: 90%; max-height: 80%; overflow-y: auto; z-index: 4000; display: none; box-shadow: 0 0 50px rgba(255, 255, 255, 0.1); border-radius: 8px; }
        .log-title { background: #fff; color: #000; padding: 12px; font-weight: bold; text-align: center; font-size: 20px; letter-spacing: 3px; }
        .log-body { padding: 20px; }
        .ver-block { margin-bottom: 25px; border-left: 4px solid var(--ut-blue); padding-left: 15px; position: relative; }
        .ver-tag { background: var(--ut-blue); color: #000; padding: 2px 8px; font-weight: bold; font-size: 12px; border-radius: 3px; }
        .ver-num { color: var(--ut-yellow); font-size: 18px; font-weight: bold; margin-left: 10px; }
        .ver-date { color: #555; font-size: 12px; display: block; margin-top: 5px; }
        .change-list { list-style: none; padding: 0; margin: 12px 0; }
        .change-list li { margin: 8px 0; font-size: 14px; color: #ccc; display: flex; align-items: flex-start; }
        .change-list li::before { content: "¬ª"; color: var(--ut-blue); margin-right: 10px; font-weight: bold; }
        .fix-highlight { color: var(--ut-green) !important; }

        #intro-layer { position: fixed; inset: 0; background: #000; z-index: 3000; display: flex; align-items: center; justify-content: center; flex-direction: column; }
        .overlay { position: fixed; inset: 0; background: #000; z-index: 2000; display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .btn-ui { border: 2px solid #fff; padding: 15px 20px; cursor: pointer; margin: 10px; font-weight: bold; background: #000; color: #fff; width: 280px; font-size: 16px; transition: 0.2s; }
        .btn-ui:hover { background: #fff; color: #000; }

        #game-container { display: none; flex-direction: column; align-items: center; width: 100%; height: 100%; }
        #boss-area { height: 180px; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; }
        .boss-glitch { animation: glitch 0.2s infinite; }
        @keyframes glitch { 0% { transform: translate(0); } 50% { transform: translate(-2px, 1px); } 100% { transform: translate(0); } }

        .roblox-char { position: relative; width: 60px; height: 80px; }
        .r-head { width: 25px; height: 25px; background: var(--roblox-yellow); margin: 0 auto; border-radius: 4px; border: 2px solid #000; }
        .r-body { width: 45px; height: 40px; background: var(--roblox-blue); margin: 2px auto; border-radius: 2px; display: flex; align-items: center; justify-content: center; font-size: 10px; color: white; font-weight: bold; }
        .r-legs { display: flex; justify-content: center; gap: 3px; }
        .r-leg { width: 20px; height: 22px; background: var(--roblox-green); border-radius: 2px; }

        #boss-hp-bg { width: 200px; height: 14px; background: #333; border: 2px solid #fff; margin-top: 10px; }
        #boss-hp-fg { height: 100%; background: var(--ut-green); width: 100%; transition: width 0.3s; }
        #battle-screen { position: relative; border: 4px solid #fff; width: 300px; height: 140px; background: #000; overflow: hidden; margin-top: 10px; }
        #heart { position: absolute; width: 16px; height: 16px; background: var(--ut-red); z-index: 100; border-radius: 2px; display: none; }
        #dialog { padding: 12px; font-size: 14px; line-height: 1.4; height: 45px; box-sizing: border-box; }
        #menu { display: flex; gap: 4px; width: 310px; margin-top: 10px; }
        .btn-m { flex: 1; border: 2px solid orange; color: orange; padding: 12px 0; font-size: 10px; text-align: center; font-weight: bold; }
        .btn-m.active { background: #332200; color: var(--ut-yellow); border-color: var(--ut-yellow); }
        .can-spare { color: var(--ut-yellow) !important; border-color: var(--ut-yellow) !important; }

        #controls { margin-top: auto; padding-bottom: 20px; display: flex; width: 100%; justify-content: space-around; align-items: center; }
        .d-pad { display: grid; grid-template-columns: repeat(3, 65px); gap: 10px; }
        .d-btn { background: #222; border: 2px solid #fff; height: 65px; display: flex; align-items: center; justify-content: center; font-size: 24px; border-radius: 10px; color: white; user-select: none; }
        #btn-z { width: 80px; height: 80px; background: #222; border: 4px solid var(--ut-yellow); color: var(--ut-yellow); border-radius: 50%; font-size: 32px; font-weight: bold; display: flex; align-items: center; justify-content: center; }

        .wall, .cursor, .tear { position: absolute; z-index: 50; }
        .wall { background: var(--roblox-blue); border: 1px solid #fff; }
        .cursor { width: 20px; height: 20px; background: #fff; clip-path: polygon(0 0, 100% 70%, 50% 70%, 80% 100%, 60% 100%, 30% 70%, 0 70%); }
        .tear { background: #fff; width: 10px; height: 10px; border-radius: 50%; }

        #mana-container { width: 100%; height: 8px; border: 1px solid var(--ut-blue); margin-top: 5px; background: #111; }
        #mana-bar { height: 100%; background: var(--ut-blue); width: 0%; }
        #attack-bar { position:absolute; inset:0; border:2px solid #fff; display:none; background:#000; z-index: 500; }
        #slider { position:absolute; left:0; top:0; width:12px; height:100%; background:#fff; }
        .shake { animation: shake 0.2s; }
        @keyframes shake { 0% { transform: translate(3px, 3px); } 25% { transform: translate(-3px, -3px); } 50% { transform: translate(3px, -3px); } 100% { transform: translate(0, 0); } }
    </style>
</head>
<body>

    <div id="changelog-overlay">
        <div class="log-title">DATABASE LOGS</div>
        <div class="log-body">
            
            <div class="ver-block">
                <span class="ver-tag">LATEST</span>
                <span class="ver-num">v1.2.4</span>
                <span class="ver-date">02 –°—ñ—á–Ω—è 2026</span>
                <ul class="change-list">
                    <li class="fix-highlight">–ü–æ–≤–Ω–∏–π —Ä–µ–¥–∏–∑–∞–π–Ω –ñ—É—Ä–Ω–∞–ª—É –û–Ω–æ–≤–ª–µ–Ω—å: —Ç–µ–ø–µ—Ä —É —Å—Ç–∏–ª—ñ —Ç–µ—Ä–º—ñ–Ω–∞–ª—É –≤–∏—Å–æ–∫–æ—ó —á—ñ—Ç–∫–æ—Å—Ç—ñ.</li>
                    <li class="fix-highlight">–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∫–æ–¥—É: –≤–∏–¥–∞–ª–µ–Ω–æ –≤—Å—ñ –ø—Ä–µ—Ñ—ñ–∫—Å-–±–∞–≥–∏ —Ç–∞ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ —Ü–∏–∫–ª–∏.</li>
                    <li>–ü–æ–∫—Ä–∞—â–µ–Ω–æ –≤—ñ–∑—É–∞–ª—å–Ω—É —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å –≥—Ä–∏ "—Å–∞—à–∏–Ω—ñ-–∫–∞–∑–∫–∏".</li>
                </ul>
            </div>

            <div class="ver-block" style="border-color: #444;">
                <span class="ver-tag" style="background:#444; color:#fff;">STABLE</span>
                <span class="ver-num">v1.2.3</span>
                <ul class="change-list">
                    <li>–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–∏–π –±–∞–≥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±–æ—Å–∞ –ê–Ω–¥—Ä1015.</li>
                    <li>–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ —Å–∏—Å—Ç–µ–º—É –∂–æ–≤—Ç–æ—ó –ø–æ—â–∞–¥–∏ (MERCY).</li>
                    <li>–î–æ–¥–∞–Ω–æ —Å–∏—Å—Ç–µ–º—É –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –º–∞–Ω–∏ (Refactor).</li>
                </ul>
            </div>

            <div class="ver-block" style="border-color: #222;">
                <span class="ver-tag" style="background:#222; color:#fff;">CORE</span>
                <span class="ver-num">v1.0.0</span>
                <ul class="change-list">
                    <li>–†–µ–ª—ñ–∑ –¥–≤–∏–≥—É–Ω–∞ –≥—Ä–∏ —Ç–∞ –ø–µ—Ä—à–æ–≥–æ —Ä—ñ–≤–Ω—è –∑ –ù–∞–ø—Å—Ç–∞–±–ª—É–∫–æ–º.</li>
                </ul>
            </div>

        </div>
        <button class="btn-ui" style="width: 100%; margin: 0; border:none; border-radius: 0 0 5px 5px; background: #fff; color: #000;" onclick="toggleChangelog(false)">–ü–û–í–ï–†–ù–£–¢–ò–°–¨ –î–û –ì–†–ò</button>
    </div>

    <div id="intro-layer">
        <h1 style="color: var(--ut-yellow); text-shadow: 2px 2px #333;">–°–ê–®–ò–ù–Ü-–ö–ê–ó–ö–ò</h1>
        <button class="btn-ui" onclick="initGame()">–ü–û–ß–ê–¢–ò –ü–†–ò–ì–û–î–£</button>
        <button class="btn-ui" style="font-size: 12px; color: var(--ut-blue); border-color: var(--ut-blue);" onclick="toggleChangelog(true)">–ñ–£–†–ù–ê–õ –°–ò–°–¢–ï–ú–ò</button>
    </div>

    <div id="screen-name" class="overlay">
        <h2>–í–í–ï–î–Ü–¢–¨ –Ü–ú'–Ø</h2>
        <input type="text" id="input-name" value="SASHA" maxlength="8" style="background:#000; color:#fff; border:2px solid #fff; padding:15px; font-size:20px; text-align:center; outline:none; width: 200px;">
        <button class="btn-ui" onclick="goToChoice()">–î–ê–õ–Ü</button>
    </div>

    <div id="screen-choice" class="overlay">
        <h2>–û–ë–ï–†–Ü–¢–¨ –°–£–ü–ï–†–ù–ò–ö–ê</h2>
        <button class="btn-ui" onclick="startGame(1)">üëª –ù–ê–ü–°–¢–ê–ë–õ–£–ö</button>
        <button class="btn-ui" style="color:var(--ut-red); border-color:var(--ut-red);" onclick="startGame(2)">üß± –ê–ù–î–†1015 (–ë–û–°)</button>
    </div>

    <div id="game-container">
        <div id="boss-area">
            <div id="enemy-sprite" style="font-size: 80px;"></div>
            <div id="roblox-sprite" class="roblox-char" style="display:none;">
                <div class="r-head"></div>
                <div class="r-body">CODE</div>
                <div class="r-legs"><div class="r-leg"></div><div class="r-leg"></div></div>
            </div>
            <div id="boss-hp-bg"><div id="boss-hp-fg"></div></div>
        </div>

        <div id="battle-screen">
            <div id="heart"></div>
            <div id="dialog"></div>
            <div id="attack-bar"><div id="slider"></div></div>
        </div>

        <div id="stats" style="width:300px; margin-top:10px; font-size: 14px;">
            <b id="disp-name">SASHA</b> LV 1 <span style="margin-left:20px;">HP <span id="hp-text">20/20</span></span>
            <div id="mana-container"><div id="mana-bar"></div></div>
        </div>

        <div id="menu">
            <div id="m0" class="btn-m active" onclick="setMenu(0)">FIGHT</div>
            <div id="m1" class="btn-m" onclick="setMenu(1)">ACT</div>
            <div id="m2" class="btn-m" onclick="setMenu(2)">ITEM</div>
            <div id="m3" class="btn-m" onclick="setMenu(3)">MERCY</div>
        </div>

        <div id="controls">
            <div class="d-pad">
                <div class="d-btn" style="grid-column:2" ontouchstart="keys.up=true" ontouchend="keys.up=false">‚ñ≤</div>
                <div class="d-btn" style="grid-column:1" ontouchstart="keys.left=true" ontouchend="keys.left=false">‚óÄ</div>
                <div class="d-btn" style="grid-column:3" ontouchstart="keys.right=true" ontouchend="keys.right=false">‚ñ∂</div>
                <div class="d-btn" style="grid-column:2" ontouchstart="keys.down=true" ontouchend="keys.down=false">‚ñº</div>
            </div>
            <div id="btn-z" onclick="pressZ()">Z</div>
        </div>
    </div>

    <script>
        let pName="SASHA", bossId=1, hp=20, eHp=1000, maxE=1000, mana=0, actCount=0;
        let mode='INTRO', menuIdx=0, sPos=0, sDir=1, px=142, py=62, audioCtx, musicTimer;
        const keys={up:false, down:false, left:false, right:false};

        function playMusic() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const notes = [293.66, 293.66, 587.33, 440.00, 415.30, 392.00, 349.23, 293.66, 349.23, 392.00];
            let step = 0;
            musicTimer = setInterval(() => {
                if(hp <= 0) return;
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.type = 'square'; osc.frequency.value = notes[step % notes.length];
                gain.gain.setValueAtTime(0.02, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.1);
                osc.connect(gain); gain.connect(audioCtx.destination);
                osc.start(); osc.stop(audioCtx.currentTime + 0.12);
                step++;
            }, 130);
        }

        function toggleChangelog(show) { document.getElementById('changelog-overlay').style.display = show ? 'block' : 'none'; }
        function initGame() { playMusic(); document.getElementById('intro-layer').style.display='none'; document.getElementById('screen-name').style.display='flex'; }
        function goToChoice() { pName = document.getElementById('input-name').value.trim().toUpperCase() || "SASHA"; document.getElementById('screen-name').style.display='none'; document.getElementById('screen-choice').style.display='flex'; }

        function startGame(id) {
            bossId=id; eHp = (id === 1 ? 1000 : 3500); maxE = eHp; actCount=0;
            document.getElementById('enemy-sprite').innerText = (id === 1 ? 'üëª' : '');
            document.getElementById('roblox-sprite').style.display = (id === 2 ? 'block' : 'none');
            if(id === 2) document.getElementById('roblox-sprite').classList.add('boss-glitch');
            document.getElementById('screen-choice').style.display='none';
            document.getElementById('game-container').style.display='flex';
            document.getElementById('disp-name').innerText=pName;
            mode='MENU'; updateUI(); requestAnimationFrame(loop);
            msg(id === 1 ? "* –í–∏ –≤—ñ–¥—á—É–≤–∞—î—Ç–µ, —â–æ —Ö—Ç–æ—Å—å —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—î." : "* –ê–Ω–¥—Ä1015: System.Status = 'Aggressive';");
        }

        function setMenu(i) { if(mode==='MENU') { menuIdx=i; [0,1,2,3].forEach(n=>document.getElementById('m'+n).classList.toggle('active', n===i)); } }
        function isSpareable() { return (bossId === 1 && actCount >= 3) || (bossId === 2 && actCount >= 5); }

        function pressZ() {
            if(mode==='MENU') {
                if(menuIdx===0) { mode='ATTACK'; document.getElementById('attack-bar').style.display='block'; sPos=0; }
                if(menuIdx===1) { actCount++; msg(bossId===1?"* –í–∏ —Ä–æ–±–∏—Ç–µ –∫–æ–º–ø–ª—ñ–º–µ–Ω—Ç –ø—Ä–∏–≤–∏–¥—É.":"* –í–∏ –∑–Ω–∞—Ö–æ–¥–∏—Ç–µ –±–∞–≥ —É –±—Ä–æ–Ω—ñ –≤–æ—Ä–æ–≥–∞."); next(); }
                if(menuIdx===2) { if(mana>=25){ hp=Math.min(20, hp+12); mana-=25; msg("* –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ 'Backup'! +12 –•–ü."); } else msg("* –ù–µ–º–∞—î –µ–Ω–µ—Ä–≥—ñ—ó."); updateUI(); next(); }
                if(menuIdx===3) { if(isSpareable()) { alert('–ú–ò–†–ù–ê –ü–ï–†–ï–ú–û–ì–ê!'); location.reload(); } else { msg("* –©–µ –Ω–µ —á–∞—Å —â–∞–¥–∏—Ç–∏."); next(); } }
            } else if(mode==='ATTACK') {
                let d = Math.abs(sPos-150)<25?600:150; eHp-=d;
                document.getElementById('attack-bar').style.display='none';
                msg("* –ù–ê–ù–ï–°–ï–ù–û –£–†–û–ù: "+d+"!"); setTimeout(()=>eHp<=0?location.reload():enemyTurn(), 800);
            }
        }

        function msg(t) { document.getElementById('dialog').innerText=t; }
        function next() { mode='BUSY'; setTimeout(enemyTurn, 800); }

        function enemyTurn() {
            mode='DODGE'; px=142; py=62; document.getElementById('heart').style.display='block';
            let t=0; const limit = bossId===2 ? 80 : 50;
            const turnInterval = setInterval(() => {
                if(hp <= 0) { clearInterval(turnInterval); return; }
                t++; 
                if(bossId===1) spawnTear(); 
                else { if(t%12===0) spawnWall(); if(t%18===0) spawnCursor(); }
                if(t>limit) { 
                    clearInterval(turnInterval); document.getElementById('heart').style.display='none'; 
                    mode='MENU'; updateUI();
                    document.getElementById('m3').classList.toggle('can-spare', isSpareable());
                    msg("* –í–∞—à —Ö—ñ–¥."); 
                }
            }, 100);
        }

        function spawnWall() {
            const w=document.createElement('div'); w.className='wall';
            w.style.width='100px'; w.style.height='15px'; w.style.top=Math.random()*110+'px'; w.style.left='-100px';
            document.getElementById('battle-screen').appendChild(w);
            let x=-100; const m=setInterval(()=>{ 
                x+=8; w.style.left=x+'px'; 
                if(checkCol(w)){ hp-=3; w.remove(); clearInterval(m); updateUI(); shake(); }
                if(x>320 || mode!=='DODGE'){ w.remove(); clearInterval(m); }
            },25);
        }

        function spawnCursor() {
            const c=document.createElement('div'); c.className='cursor';
            c.style.left=px+'px'; c.style.top='-30px';
            document.getElementById('battle-screen').appendChild(c);
            let y=-30; const m=setInterval(()=>{ 
                y+=10; c.style.top=y+'px'; 
                if(checkCol(c)){ hp-=4; c.remove(); clearInterval(m); updateUI(); shake(); }
                if(y>150 || mode!=='DODGE'){ c.remove(); clearInterval(m); }
            },20);
        }

        function spawnTear() {
            const p=document.createElement('div'); p.className='tear';
            p.style.left=Math.random()*280+'px'; p.style.top='-10px';
            document.getElementById('battle-screen').appendChild(p);
            let y=-10; const m=setInterval(()=>{ 
                y+=6; p.style.top=y+'px'; 
                if(checkCol(p)){ hp-=2; p.remove(); clearInterval(m); updateUI(); shake(); }
                if(y>150 || mode!=='DODGE'){ p.remove(); clearInterval(m); }
            },30);
        }

        function checkCol(el) {
            if(mode!=='DODGE') return false;
            const hr=document.getElementById('heart').getBoundingClientRect(), er=el.getBoundingClientRect();
            return !(er.left>hr.right||er.right<hr.left||er.top>hr.bottom||er.bottom<hr.top);
        }

        function shake() { document.getElementById('battle-screen').classList.add('shake'); setTimeout(()=>document.getElementById('battle-screen').classList.remove('shake'), 200); }
        function updateUI() { 
            document.getElementById('hp-text').innerText=Math.max(0,hp)+"/20"; 
            document.getElementById('boss-hp-fg').style.width=(Math.max(0,eHp)/maxE*100)+"%"; 
            document.getElementById('mana-bar').style.width=Math.min(100, mana)+"%";
            if(hp<=0 && mode!=='DEAD') { mode='DEAD'; alert('–ì—Ä–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–∞. –°–ø—Ä–æ–±—É–π —â–µ!'); location.reload(); }
        }

        function loop() {
            if(mode==='DODGE') {
                const spd = 5.5;
                if(keys.up && py > 2) py -= spd; if(keys.down && py < 122) py += spd;
                if(keys.left && px > 2) px -= spd; if(keys.right && px < 282) px += spd;
                const h = document.getElementById('heart');
                h.style.left=px+'px'; h.style.top=py+'px';
                if(mana<100) mana+=0.35; updateUI();
            }
            if(mode==='ATTACK') { sPos+=(13*sDir); if(sPos>288||sPos<0) sDir*=-1; document.getElementById('slider').style.left=sPos+'px'; }
            requestAnimationFrame(loop);
        }

        window.addEventListener('keydown', e => { if(e.key.includes('Arrow')) keys[e.key.replace('Arrow','').toLowerCase()] = true; if(e.key.toLowerCase() === 'z') pressZ(); });
        window.addEventListener('keyup', e => { if(e.key.includes('Arrow')) keys[e.key.replace('Arrow','').toLowerCase()] = false; });
    </script>
</body>
</html>

