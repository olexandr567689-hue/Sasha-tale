<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>—Å–∞—à–∏–Ω—ñ-–∫–∞–∑–∫–∏: AUDIO FIX</title>
    <style>
        :root { --ut-red: #ff0000; --ut-yellow: #ffff00; --ut-green: #00ff00; --ut-blue: #4deeea; }
        body { background: #000; color: #fff; margin: 0; font-family: 'Courier New', monospace; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; touch-action: none; }
        
        #intro-layer { position: fixed; inset: 0; background: #000; z-index: 3000; display: flex; align-items: center; justify-content: center; flex-direction: column; text-align: center; }
        .btn-ui { border: 4px solid #fff; padding: 20px 30px; cursor: pointer; margin: 10px; font-weight: bold; background: #000; color: #fff; width: 280px; font-size: 20px; transition: 0.2s; }
        .btn-ui:active { background: #fff; color: #000; }

        #game-container { display: none; flex-direction: column; align-items: center; width: 100%; height: 100%; }
        #battle-screen { position: relative; border: 4px solid #fff; width: 300px; height: 140px; background: #000; overflow: hidden; margin-top: 10px; }
        #heart { position: absolute; width: 16px; height: 16px; background: var(--ut-red); z-index: 100; border-radius: 2px; display: none; }
        #menu { display: flex; gap: 4px; width: 310px; margin-top: 10px; }
        .btn-m { flex: 1; border: 2px solid orange; color: orange; padding: 12px 0; font-size: 10px; text-align: center; font-weight: bold; }
        .btn-m.active { background: #332200; color: var(--ut-yellow); border-color: var(--ut-yellow); }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <div id="intro-layer">
        <h1 style="color: var(--ut-yellow); font-size: 35px; margin-bottom: 5px;">–°–ê–®–ò–ù–Ü-–ö–ê–ó–ö–ò</h1>
        <p style="color: var(--ut-blue); margin-bottom: 30px;">(–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –≥—É—á–Ω–æ, —â–æ–± —É–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫)</p>
        <button class="btn-ui" id="btn-start">–ì–†–ê–¢–ò –ó –ú–£–ó–ò–ö–û–Æ</button>
    </div>

    <div id="game-container">
        <div id="boss-area" style="height: 150px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
            <div id="enemy-sprite" style="font-size: 60px;">ü§ñ</div>
            <div style="width:200px; height:10px; background:#333; border:2px solid #fff; margin-top:10px;">
                <div id="hp-fill" style="width:100%; height:100%; background:var(--ut-green);"></div>
            </div>
        </div>
        <div id="battle-screen"><div id="heart"></div><div id="dialog" style="padding:10px;">* –ú—É–∑–∏–∫–∞ –º–∞—î –≥—Ä–∞—Ç–∏!</div></div>
        <div id="menu">
            <div id="m0" class="btn-m active">FIGHT</div>
            <div id="m1" class="btn-m">ACT</div>
            <div id="m2" class="btn-m">ITEM</div>
            <div id="m3" class="btn-m">MERCY</div>
        </div>
        <p style="font-size: 12px; color: #555; margin-top: 20px;">–ö–µ—Ä—É–≤–∞–Ω–Ω—è: –°—Ç—Ä—ñ–ª–æ—á–∫–∏ —Ç–∞ Z</p>
    </div>

    <script>
        const music = document.getElementById('bg-music');
        const startBtn = document.getElementById('btn-start');
        let audioCtx;

        // –§–£–ù–ö–¶–Ü–Ø –ó–ê–ü–£–°–ö–£
        startBtn.onclick = function() {
            // 1. –°–ø—Ä–æ–±–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ MP3
            music.play().catch(() => {
                console.log("MP3 –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ, –≤–º–∏–∫–∞—é —Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä...");
                startSynth(); // –Ø–∫—â–æ —Ñ–∞–π–ª—É –Ω–µ–º–∞, –≤–º–∏–∫–∞—î–º–æ –ø—ñ—â–∞–ª–∫—É Megalovania
            });

            // 2. –°–ø—Ä–æ–±–∞ "—Ä–æ–∑–±—É–¥–∏—Ç–∏" –±—Ä–∞—É–∑–µ—Ä –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä–∞
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }

            document.getElementById('intro-layer').style.display = 'none';
            document.getElementById('game-container').style.display = 'flex';
            startGame();
        };

        function startSynth() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const notes = [293, 293, 587, 440, 415, 392, 349, 293, 349, 392];
            let i = 0;
            setInterval(() => {
                const osc = audioCtx.createOscillator();
                const g = audioCtx.createGain();
                osc.type = 'square';
                osc.frequency.value = notes[i % notes.length];
                g.gain.setValueAtTime(0.01, audioCtx.currentTime);
                g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.1);
                osc.connect(g); g.connect(audioCtx.destination);
                osc.start(); osc.stop(audioCtx.currentTime + 0.1);
                i++;
            }, 125);
        }

        function startGame() {
            // –¢—É—Ç —Ç–≤–æ—è –ª–æ–≥—ñ–∫–∞ –≥—Ä–∏
            console.log("–ì—Ä–∞ –ø–æ—á–∞–ª–∞—Å—è!");
        }
    </script>
</body>
</html>

